<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>CSV to table using AJAX(jQuery)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.min.js"></script>

</head>

<body>
    <h2>
        CSV to table using AJAX(jQuery)
    </h2>
    <div>
        <button id="loadButton" class="btn btn-primary">Load</button>
    </div>
    <div id="feedback">

    </div>
    <script>
        $(document).ready(function () {
            $("#loadButton").click(function () {
                $.ajax({
                    url: "./dataSource/classmate.csv",
                    dataType: "text",
                    success(res) {
                        let resData = res.split(/\n|\r\n/);
                        // console.log(resData); //match on \n or\r\n
                        let tableData = ""
                        tableData += `<table class="table table-bordered table-striped">`
                        for (let i = 0; i < resData.length; i++) {
                            let cellData = resData[i].split(',')
                            tableData += `<tr>`;
                            for (let j = 0; j < cellData.length; j++) {
                                if (i == 0) {
                                    tableData += `<th>${cellData[j]}</th>`
                                }
                                else {
                                    tableData += `<td>${cellData[j]}</td>`
                                }
                            }
                            tableData += `</tr>`;
                        }
                        tableData += `</table>`
                        $('#feedback').html(tableData);
                    }
                })
                // $.ajax({
                //     url: '', //要呼叫的網址或檔案
                //     type: '', //GET, POST, PUT, DELETE
                //     data: '', //要傳送到Server端的資料，會自動轉成JQ的字串型態
                //     dataType: '', //預期Server端回傳的資料型態，xml/html/script/json/jsonp (CORS)/text(.csv)
                //     success(){},
                //     error() {},
                //     complete() {},
                // })
            })
        })
    </script>
</body>

</html>